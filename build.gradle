plugins {
	id 'org.springframework.boot' version '2.5.1'
	id 'java'
}

apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'org.springframework.boot'
apply plugin: 'io.spring.dependency-management'
apply plugin: 'jacoco'

group = 'uk.gov.digital.ho.hocs'
version = '0.0.1'
sourceCompatibility = '11'
targetCompatibility = '11'

task copyLombok(type: Copy) {
	outputs.upToDateWhen { false }
	into "${buildDir}/libs"
	include "lombok*.jar"
	from configurations.compileClasspath
}

build.dependsOn(copyLombok)

repositories {
	mavenCentral()
}

dependencies {
	implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.12.5'

	implementation('org.springframework.boot:spring-boot-starter-web')
	implementation('org.springframework.retry:spring-retry')
	implementation('org.springframework.boot:spring-boot-starter-actuator')
	implementation("org.apache.camel:camel-spring-boot-starter:2.23.0")
	implementation('javax:javaee-api:8.0.1')
	implementation ('org.docx4j:docx4j:6.1.2'){
		exclude group: "org.slf4j", module: "slf4j-log4j12"
	}
	implementation('com.googlecode.jaxb-namespaceprefixmapper-interfaces:JAXBNamespacePrefixMapper:6.1.0')
	implementation('javax.xml.bind:jaxb-api:2.4.0-b180830.0359')
	implementation('com.sun.xml.bind:jaxb-impl:2.3.2')
	implementation('org.glassfish.jaxb:jaxb-runtime:2.3.2')
	implementation('org.glassfish.jersey.core:jersey-common:2.28')

	compileOnly('org.projectlombok:lombok')
	annotationProcessor('org.projectlombok:lombok')

	implementation('net.logstash.logback:logstash-logback-encoder:5.3')
	testImplementation('org.springframework.boot:spring-boot-starter-test')
	testImplementation('com.github.tomakehurst:wiremock-standalone:2.18.0')
}

jar {
	enabled = false
}

test {
	useJUnitPlatform()
}
